<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å¯æ„›å¥³å­©çš„å¹¸é‹æŒ‘æˆ°ï¼</title> <!-- æ¨™é¡Œå·²æ›´æ”¹ -->
  <style>
    /* å…¨åŸŸæ¨£å¼ */
    body {
      font-family: 'Arial', sans-serif;
      background: linear-gradient(to bottom right, #e0f2f7, #c1e8ff); /* æ¼¸å±¤èƒŒæ™¯ */
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      margin: 0;
      color: #333;
      overflow: hidden; /* é˜²æ­¢æ»¾å‹•æ¢ */
      position: relative; /* ç‚ºæ„›å¿ƒèƒŒæ™¯æä¾›å®šä½ä¸Šä¸‹æ–‡ */
    }

    h1 {
      color: #007bff; /* è—è‰²æ¨™é¡Œ */
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
      margin-bottom: 10px;
    }

    p {
      font-size: 1.2em;
      margin-bottom: 15px;
      color: #555;
      text-align: center; /* å‰¯æ¨™é¡Œç½®ä¸­ */
    }

    /* è¼‰å…¥ç•«é¢æ¨£å¼ */
    #loadingScreen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: #fff;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 2000;
      transition: opacity 0.5s ease-out; /* æ·¡å‡ºå‹•ç•« */
    }

    #loadingText {
      font-size: 1.8em;
      color: #007bff;
      margin-bottom: 20px;
    }

    #progressBarContainer {
      width: 80%;
      max-width: 400px;
      height: 25px;
      background-color: #e0e0e0;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);
    }

    #progressBar {
      width: 0%;
      height: 100%;
      background-color: #007bff;
      border-radius: 12px;
      transition: width 0.1s ease-out; /* æ›´å¿«çš„é€²åº¦æ¢å‹•ç•« */
      display: flex;
      justify-content: center;
      align-items: center;
      color: white;
      font-weight: bold;
      font-size: 0.9em;
    }

    /* éŠæˆ²å®¹å™¨æ¨£å¼ */
    #gameContainer {
      display: none; /* é è¨­éš±è—ï¼Œè¼‰å…¥å®Œæˆå¾Œæ‰é¡¯ç¤º */
      flex-direction: column;
      align-items: center;
      justify-content: center;
      width: 100%;
      padding: 20px; /* å¢åŠ æ•´é«”å…§é‚Šè· */
      box-sizing: border-box;
    }

    /* æŒ‰éˆ•æ¨£å¼ */
    #baitImage {
      cursor: pointer;
      max-width: 750px; /* åœ–ç‰‡æ›´å¤§ (åŸ 500px * 1.5 = 750px) */
      height: auto;
      border-radius: 20px; /* æ›´åœ“æ½¤ */
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3); /* æ›´æ˜é¡¯çš„é™°å½± */
      transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
      border: 5px solid #007bff; /* é‚Šæ¡† */
    }

    #baitImage:hover {
      transform: scale(1.05); /* ç¨å¾®ç¸®å°hoveræ•ˆæœ */
      box-shadow: 0 12px 24px rgba(0, 0, 0, 0.4);
    }

    #clickCounter {
      font-size: 1.6em;
      font-weight: bold;
      margin-top: 25px;
      color: #0056b3;
      background-color: rgba(255, 255, 255, 0.7);
      padding: 10px 20px;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    /* jumpscare æ¨£å¼ */
    #jumpscareContainer {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: none;
      justify-content: center;
      align-items: center;
      background-color: rgba(0, 0, 0, 0.95); /* æ›´é»‘çš„èƒŒæ™¯ */
      z-index: 1000;
      animation: fadeInOut 5s forwards; /* æ–°å¢å‹•ç•« */
    }

    .jumpscareImage {
      width: 100%; /* åœ–ç‰‡æ»¿ç‰ˆ */
      height: 100%; /* åœ–ç‰‡æ»¿ç‰ˆ */
      object-fit: cover; /* ä¿æŒåœ–ç‰‡æ¯”ä¾‹ä¸¦è¦†è“‹æ•´å€‹å®¹å™¨ */
      animation: shake 0.3s infinite alternate; /* æ–°å¢æŠ–å‹•å‹•ç•« */
    }

    @keyframes fadeInOut {
      0% { opacity: 0; }
      10% { opacity: 1; }
      90% { opacity: 1; }
      100% { opacity: 0; }
    }

    @keyframes shake {
      0% { transform: translate(1px, 1px) rotate(0deg); }
      10% { transform: translate(-1px, -2px) rotate(-1deg); }
      20% { transform: translate(-3px, 0px) rotate(1deg); }
      30% { transform: translate(3px, 2px) rotate(0deg); }
      40% { transform: translate(1px, -1px) rotate(1deg); }
      50% { transform: translate(-1px, 2px) rotate(-1deg); }
      60% { transform: translate(-3px, 1px) rotate(0deg); }
      70% { transform: translate(3px, 1px) rotate(-1deg); }
      80% { transform: translate(-1px, -1px) rotate(1deg); }
      90% { transform: translate(1px, 2px) rotate(0deg); }
      100% { transform: translate(1px, -2px) rotate(-1deg); }
    }


    /* é‹æ°£æ’è¡Œæ¦œæ¨£å¼ */
    #leaderboard {
      margin-top: 40px;
      border: 2px solid #007bff; /* æ›´æ˜é¡¯çš„é‚Šæ¡† */
      border-radius: 15px;
      padding: 25px;
      width: 90%;
      max-width: 650px;
      background-color: #fff;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
      text-align: center;
      display: none; /* é è¨­éš±è—ï¼ŒJumpscare å¾Œæ‰é¡¯ç¤º */
    }

    #leaderboard h2 {
      color: #007bff;
      margin-bottom: 20px;
      font-size: 1.8em;
    }

    #leaderboard ol {
      list-style-type: none; /* ç§»é™¤é è¨­ç·¨è™Ÿ */
      padding: 0;
    }

    #leaderboard li {
      font-size: 1.2em;
      margin-bottom: 10px;
      background-color: #f9f9f9;
      padding: 8px 15px;
      border-radius: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-left: 5px solid #007bff; /* åˆ—è¡¨é …å·¦å´è£é£¾ */
    }
    #leaderboard li:nth-child(even) {
      background-color: #eefaff; /* éš”è¡Œè®Šè‰² */
    }
    #leaderboard li span:first-child {
      font-weight: bold;
      color: #333;
    }
    #leaderboard li span:last-child {
      color: #0056b3;
    }


    /* åˆ†äº«æŒ‰éˆ• */
    #shareButtons {
      margin-top: 30px;
    }

    #shareButtons button {
      background-color: #28a745; /* ç¶ è‰²æŒ‰éˆ• */
      color: #fff;
      border: none;
      padding: 12px 25px;
      margin: 0 8px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1.1em;
      transition: background-color 0.3s ease, transform 0.2s ease;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    #shareButtons button:hover {
      background-color: #218838;
      transform: translateY(-2px);
    }

    /* æ„›å¿ƒå‹•ç•«æ¨£å¼ */
    #heart-background {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      pointer-events: none; /* è®“æ„›å¿ƒä¸å½±éŸ¿é»æ“Šäº‹ä»¶ */
      z-index: -1; /* ç¢ºä¿åœ¨æ‰€æœ‰å…§å®¹çš„å¾Œæ–¹ */
    }

    .heart {
      position: absolute;
      font-size: 2em; /* æ„›å¿ƒå¤§å° */
      color: #ff69b4; /* ç²‰ç´…è‰²æ„›å¿ƒ */
      opacity: 0;
      animation: floatUp 6s ease-out forwards;
      text-shadow: 0 0 5px rgba(255, 105, 180, 0.5); /* æ„›å¿ƒé™°å½± */
    }

    @keyframes floatUp {
      0% { transform: translateY(0) translateX(0) scale(0.5); opacity: 0; }
      20% { opacity: 0.8; } /* ç¨å¾®æ·¡å…¥ */
      100% { transform: translateY(-100vh) translateX(var(--random-x)) scale(1.5); opacity: 0; }
    }
  </style>
</head>
<body>
  <!-- æ„›å¿ƒèƒŒæ™¯å‹•ç•«å®¹å™¨ -->
  <div id="heart-background"></div>

  <!-- è¼‰å…¥ç•«é¢ -->
  <div id="loadingScreen">
    <div id="loadingText">è¼‰å…¥ä¸­ï¼Œè«‹ç¨å€™...</div>
    <div id="progressBarContainer">
      <div id="progressBar">0%</div>
    </div>
  </div>

  <!-- éŠæˆ²ä¸»é«” -->
  <div id="gameContainer">
    <h1>é»æ“Šå¯æ„›å¥³å­©ï¼</h1> <!-- æ¨™é¡Œå·²æ›´æ”¹ -->
    <p>é»æ“Šä¸‹æ–¹çš„åœ–ç‰‡ä¾†æ¸¬è©¦ä½ çš„é‹æ°£ï¼<br>ï¼ˆæœ‰å¯èƒ½æŠ½åˆ°ç¨€æœ‰å¯æ„›å¥³å­©ï¼‰</p> <!-- å‰¯æ¨™é¡Œå·²æ›´æ”¹ -->
    <img id="baitImage" src="" alt="é»æˆ‘" title="é»æˆ‘">
    <p id="clickCounter">é»æ“Šæ¬¡æ•¸: 0</p>

    <!-- jumpscare å®¹å™¨ -->
    <div id="jumpscareContainer">
      <img id="jumpscareImage" class="jumpscareImage" src="" alt="Jumpscare">
    </div>

    <audio id="jumpscareSound" src="scream.mp3" preload="auto"></audio>

    <!-- é‹æ°£æ’è¡Œæ¦œ -->
    <div id="leaderboard">
      <h2>ä¸–ç•Œç´€éŒ„ - æœ€å¿«è¢«åš‡åˆ°</h2>
      <ol id="leaderboardList">
        <!-- æ’è¡Œæ¦œé …ç›®å°‡åœ¨é€™è£¡å‹•æ…‹ç”Ÿæˆ -->
      </ol>
    </div>

    <!-- åˆ†äº«æŒ‰éˆ• -->
    <div id="shareButtons">
      <button id="shareButton">åˆ†äº«ä½ çš„é‹æ°£ï¼</button>
    </div>
  </div>

  <script>
    const baitImage = document.getElementById("baitImage");
    const jumpscareContainer = document.getElementById("jumpscareContainer");
    const jumpscareImage = document.getElementById("jumpscareImage");
    const jumpscareSound = document.getElementById("jumpscareSound");
    const clickCounterDisplay = document.getElementById("clickCounter");
    const leaderboardList = document.getElementById("leaderboardList");
    const shareButton = document.getElementById("shareButton");
    const loadingScreen = document.getElementById("loadingScreen");
    const progressBar = document.getElementById("progressBar");
    const gameContainer = document.getElementById("gameContainer");
    const leaderboard = document.getElementById("leaderboard"); // ç²å–æ’è¡Œæ¦œå…ƒç´ 
    const heartBackground = document.getElementById("heart-background"); // æ„›å¿ƒèƒŒæ™¯å®¹å™¨

    let clickCount = 0;
    let triggerCount = 0; // Jumpscare è§¸ç™¼æ¬¡æ•¸ï¼Œå°‡ç”±äº‚æ•¸ç”Ÿæˆ
    let jumpscareTriggered = false;

    // åœ–ç‰‡è³‡æº
    const cuteImages = [
      "cute_animal_1.jpg",
      "cute_animal_2.jpg",
      "cute_animal_3.jpg",
      "cute_animal_4.jpg",
      "cute_animal_5.jpg",
      "cute_animal_6.jpg",
      "cute_animal_7.jpg",
      "cute_animal_8.jpg"
    ];

    const jumpscareImages = [
      "scary_face_1.jpg",
      "scary_face_2.jpg",
      "scary_face_3.jpg",
      "scary_face_4.jpg"
    ];

    // é è¼‰å…¥æ‰€æœ‰åœ–ç‰‡ï¼Œä¸åŒ…å« scream.mp3
    const allImagesToPreload = [...cuteImages, ...jumpscareImages];

    function getRandomElement(array) {
      return array[Math.floor(Math.random() * array.length)];
    }

    // ç”ŸæˆåŠ æ¬Šäº‚æ•¸ 1~20 (1~10 æ©Ÿç‡é«˜å…©å€)
    function generateWeightedRandomTriggerCount() {
      // å‰µå»ºä¸€å€‹åŒ…å«æ•¸å­—çš„é™£åˆ—ï¼Œ1-10 å‡ºç¾å…©æ¬¡ï¼Œ11-20 å‡ºç¾ä¸€æ¬¡
      const pool = [];
      for (let i = 1; i <= 10; i++) {
        pool.push(i);
        pool.push(i); // 1-10 å¢åŠ å…©å€æ©Ÿç‡
      }
      for (let i = 11; i <= 20; i++) {
        pool.push(i);
      }
      return getRandomElement(pool);
    }

    // æ’è¡Œæ¦œçš„æœ¬åœ°å„²å­˜éµ
    const LEADERBOARD_KEY = "jumpscareLeaderboard";

    // è¼‰å…¥æ’è¡Œæ¦œ
    function loadLeaderboard() {
      const leaderboardData = localStorage.getItem(LEADERBOARD_KEY);
      if (leaderboardData) {
        return JSON.parse(leaderboardData);
      } else {
        return [
          { name: "åŒ¿åç©å®¶", score: 1 },
          { name: "ç¥ç§˜äºº", score: 2 },
          { name: "è¶…ç´šå¹¸é‹æ˜Ÿ", score: 3 },
          { name: "å€’æ¥£é¬¼", score: 4 },
          { name: "è¡°ç¥é™„é«”", score: 5 }
        ];
      }
    }

    // å„²å­˜æ’è¡Œæ¦œ
    function saveLeaderboard(leaderboard) {
      localStorage.setItem(LEADERBOARD_KEY, JSON.stringify(leaderboard));
    }

    // é¡¯ç¤ºæ’è¡Œæ¦œ
    function displayLeaderboard() {
      leaderboardList.innerHTML = ""; // æ¸…ç©ºç¾æœ‰åˆ—è¡¨
      leaderboardData.forEach((entry, index) => { // ä½¿ç”¨ leaderboardData
        const listItem = document.createElement("li");
        // ä½¿ç”¨ span åˆ†é–‹å§“åå’Œåˆ†æ•¸ï¼Œæ–¹ä¾¿ CSS èª¿æ•´
        listItem.innerHTML = `<span>${index + 1}. ${entry.name}</span> <span>- ${entry.score} æ¬¡</span>`;
        leaderboardList.appendChild(listItem);
      });
    }

    // åˆå§‹åŒ–æ’è¡Œæ¦œ
    let leaderboardData = loadLeaderboard(); // è®Šæ•¸åæ”¹ç‚º leaderboardData ä»¥é¿å…èˆ‡ DOM å…ƒç´ è¡çª
    displayLeaderboard(); // é å…ˆè¼‰å…¥æ•¸æ“šï¼Œä½†ä¸æœƒé¡¯ç¤º DOM å…ƒç´ 

    // è³‡æºé è¼‰å…¥åŠŸèƒ½
    let loadedCount = 0;
    function preloadAssets() {
      console.log("é–‹å§‹é è¼‰å…¥æ‰€æœ‰åœ–ç‰‡...");
      return new Promise((resolve) => {
        if (allImagesToPreload.length === 0) {
          console.log("æ²’æœ‰åœ–ç‰‡éœ€è¦é è¼‰å…¥ã€‚");
          resolve();
          return;
        }

        allImagesToPreload.forEach((src) => {
          const img = new Image();
          img.src = src;
          img.onload = () => {
            loadedCount++;
            const progress = Math.floor((loadedCount / allImagesToPreload.length) * 100);
            progressBar.style.width = `${progress}%`;
            progressBar.textContent = `${progress}%`;
            console.log(`å·²è¼‰å…¥åœ–ç‰‡: ${src}, é€²åº¦: ${progress}%`);
            if (loadedCount === allImagesToPreload.length) {
              console.log("æ‰€æœ‰åœ–ç‰‡è¼‰å…¥å®Œæˆï¼");
              resolve();
            }
          };
          img.onerror = (e) => {
            loadedCount++;
            const progress = Math.floor((loadedCount / allImagesToPreload.length) * 100);
            progressBar.style.width = `${progress}%`;
            progressBar.textContent = `${progress}%`;
            console.error(`è¼‰å…¥åœ–ç‰‡å¤±æ•—: ${src}`, e); // éŒ¯èª¤è¨Šæ¯
            if (loadedCount === allImagesToPreload.length) {
              console.log("æ‰€æœ‰åœ–ç‰‡è¼‰å…¥å˜—è©¦å®Œæˆ (å¯èƒ½åŒ…å«éŒ¯èª¤)ã€‚");
              resolve(); // å³ä½¿æœ‰éŒ¯èª¤ä¹Ÿç¹¼çºŒï¼Œé¿å…å¡ä½
            }
          };
        });
      });
    }

    // éŠæˆ²åˆå§‹åŒ–
    function initializeGame() {
      triggerCount = generateWeightedRandomTriggerCount(); // ç”Ÿæˆ Jumpscare è§¸ç™¼æ¬¡æ•¸
      baitImage.src = getRandomElement(cuteImages); // è¨­å®šåˆå§‹åœ–ç‰‡
      console.log("éŠæˆ²å·²åˆå§‹åŒ–ã€‚Jumpscare å°‡åœ¨", triggerCount, "æ¬¡é»æ“Šå¾Œè§¸ç™¼ã€‚"); // æ–¹ä¾¿æ¸¬è©¦
    }

    // å‰µå»ºæ¼‚æµ®æ„›å¿ƒ
    function createHeart() {
      const heart = document.createElement('div');
      heart.classList.add('heart');
      heart.textContent = 'ğŸ’–'; // æˆ– 'â¤ï¸'
      const startX = Math.random() * 100; // 0% åˆ° 100% çš„èµ·å§‹ X ä½ç½®
      const randomDuration = 4 + Math.random() * 4; // 4åˆ°8ç§’çš„å‹•ç•«æ™‚é–“
      const randomDelay = Math.random() * 2; // 0åˆ°2ç§’çš„å‹•ç•«å»¶é²
      const randomOffsetX = (Math.random() - 0.5) * 50; // -25% åˆ° 25% çš„æ°´å¹³åç§»

      heart.style.left = `${startX}vw`;
      heart.style.animationDuration = `${randomDuration}s`;
      heart.style.animationDelay = `${randomDelay}s`;
      heart.style.setProperty('--random-x', `${randomOffsetX}vw`); // å°‡éš¨æ©ŸXåç§»é‡å‚³éçµ¦CSSè®Šæ•¸

      heartBackground.appendChild(heart);

      // å‹•ç•«çµæŸå¾Œç§»é™¤æ„›å¿ƒå…ƒç´ 
      heart.addEventListener('animationend', () => {
        heart.remove();
      });
    }

    // æ¯éš”ä¸€æ®µæ™‚é–“å‰µå»ºä¸€å€‹æ„›å¿ƒ
    let heartInterval;
    function startHeartAnimation() {
      heartInterval = setInterval(createHeart, 300); // æ¯ 300 æ¯«ç§’ç”Ÿæˆä¸€å€‹æ„›å¿ƒ
    }

    function stopHeartAnimation() {
      clearInterval(heartInterval);
    }


    // ç­‰å¾…æ‰€æœ‰åœ–ç‰‡è¼‰å…¥å®Œæˆ
    preloadAssets().then(() => {
      console.log("preloadAssets Promise å·²è§£æã€‚");
      // è¼‰å…¥å®Œæˆå¾Œï¼Œè®“é€²åº¦æ¢å¿«é€Ÿå¡«æ»¿åˆ° 100%
      progressBar.style.width = '100%';
      progressBar.textContent = '100%';

      // ç¨å¾®å»¶é²å¾Œæ·¡å‡ºè¼‰å…¥ç•«é¢ä¸¦é¡¯ç¤ºéŠæˆ²å…§å®¹
      setTimeout(() => {
        loadingScreen.style.opacity = 0;
        console.log("è¼‰å…¥ç•«é¢é–‹å§‹æ·¡å‡ºã€‚");
        setTimeout(() => {
          loadingScreen.style.display = "none";
          gameContainer.style.display = "flex"; // é¡¯ç¤ºéŠæˆ²å…§å®¹
          initializeGame(); // åˆå§‹åŒ–éŠæˆ²ï¼ˆè¨­å®š Jumpscare æ¬¡æ•¸ï¼‰
          console.log("éŠæˆ²å®¹å™¨å·²é¡¯ç¤ºã€‚");
          startHeartAnimation(); // é–‹å§‹æ„›å¿ƒå‹•ç•«

          // å˜—è©¦é€²å…¥å…¨è¢å¹•æ¨¡å¼
          if (document.documentElement.requestFullscreen) {
            document.documentElement.requestFullscreen().then(() => {
              console.log("å·²é€²å…¥å…¨è¢å¹•æ¨¡å¼ã€‚");
            }).catch((err) => {
              console.warn("ç„¡æ³•é€²å…¥å…¨è¢å¹•æ¨¡å¼:", err);
              // æç¤ºä½¿ç”¨è€…å¯ä»¥æ‰‹å‹•é–‹å•Ÿå…¨è¢å¹•
              // alert("æ‚¨çš„ç€è¦½å™¨å¯èƒ½é˜»æ­¢äº†è‡ªå‹•å…¨è¢å¹•ã€‚æ‚¨å¯ä»¥å˜—è©¦æ‰‹å‹•é–‹å•Ÿå…¨è¢å¹• (é€šå¸¸æ˜¯ F11)ã€‚");
            });
          } else if (document.documentElement.webkitRequestFullscreen) { /* Safari */
            document.documentElement.webkitRequestFullscreen();
          } else if (document.documentElement.msRequestFullscreen) { /* IE11 */
            document.documentElement.msRequestFullscreen();
          }
          
        }, 500); // è®“æ·¡å‡ºå‹•ç•«å®Œæˆ
      }, 200); // è®“é€²åº¦æ¢åœç•™åœ¨ 100% ä¸€å°æ®µæ™‚é–“
    }).catch(error => {
        console.error("é è¼‰å…¥è³‡æºæ™‚ç™¼ç”Ÿæœªé æœŸçš„éŒ¯èª¤:", error);
        // å³ä½¿é è¼‰å…¥å¤±æ•—ï¼Œä¹Ÿå˜—è©¦é¡¯ç¤ºéŠæˆ²ï¼Œä½†å¯èƒ½æœƒå‡ºç¾ç ´åœ–æˆ–ç„¡éŸ³æ•ˆ
        loadingScreen.style.display = "none";
        gameContainer.style.display = "flex";
        initializeGame();
    });


    baitImage.addEventListener("click", function() {
      console.log("åœ–ç‰‡è¢«é»æ“Šã€‚");
      if (jumpscareTriggered) {
        console.log("Jumpscare å·²è§¸ç™¼ï¼Œå¿½ç•¥é»æ“Šã€‚");
        return; // å¦‚æœ jumpscare å·²ç¶“è§¸ç™¼ï¼Œå‰‡ä¸éŸ¿æ‡‰é»æ“Š
      }

      // æ¯æ¬¡é»æ“Šéƒ½æ›´æ›åœ–ç‰‡
      baitImage.src = getRandomElement(cuteImages);
      clickCount++;
      clickCounterDisplay.textContent = "é»æ“Šæ¬¡æ•¸: " + clickCount;
      console.log(`é»æ“Šæ¬¡æ•¸: ${clickCount}, è§¸ç™¼æ¬¡æ•¸: ${triggerCount}`);

      if (clickCount >= triggerCount && !jumpscareTriggered) {
        jumpscareTriggered = true;
        console.log("Jumpscare æ¢ä»¶é”æˆï¼");
        stopHeartAnimation(); // åœæ­¢æ„›å¿ƒå‹•ç•«

        // éš¨æ©Ÿé¸æ“‡ jumpscare åœ–ç‰‡
        jumpscareImage.src = getRandomElement(jumpscareImages);
        console.log(`Jumpscare åœ–ç‰‡: ${jumpscareImage.src}`);

        // é¡¯ç¤º jumpscare ä¸¦æ’­æ”¾éŸ³æ•ˆ (åŒæ™‚)
        jumpscareContainer.style.display = "flex";
        jumpscareSound.currentTime = 0; // ç¢ºä¿æ¯æ¬¡éƒ½å¾é ­æ’­æ”¾
        jumpscareSound.play().then(() => {
            console.log("Jumpscare éŸ³æ•ˆæ’­æ”¾æˆåŠŸã€‚");
        }).catch(error => {
            console.error("Jumpscare éŸ³æ•ˆæ’­æ”¾å¤±æ•—:", error);
            // å¦‚æœéŸ³æ•ˆæ’­æ”¾å¤±æ•—ï¼Œä»ç„¶ç¹¼çºŒéŠæˆ²æµç¨‹
        });


        // 5 ç§’å¾Œéš±è— jumpscare ä¸¦é¡¯ç¤ºè¼¸å…¥åå­—çš„æç¤ºæ¡†
        setTimeout(function() {
          jumpscareContainer.style.display = "none"; // éš±è— jumpscare å®¹å™¨
          console.log("Jumpscare å·²éš±è—ã€‚");

          // æç¤ºç©å®¶è¼¸å…¥åå­—
          const playerName = prompt("æˆ‘åœ¨é‹æ°£æ’è¡Œæ¦œä¸Šé»äº† " + clickCount + " æ¬¡æ‰è¢«åš‡ï¼ è«‹è¼¸å…¥ä½ çš„åå­—ï¼š", "åŒ¿åç©å®¶");
          if (playerName) {
            console.log(`ç©å®¶ ${playerName} è¼¸å…¥å§“åï¼Œåˆ†æ•¸: ${clickCount}`);
            leaderboardData.push({ name: playerName, score: clickCount }); // ä½¿ç”¨ leaderboardData
            leaderboardData.sort((a, b) => a.score - b.score); // ä¾åˆ†æ•¸æ’åº (è¶Šå°è¶Šé å‰)
            leaderboardData = leaderboardData.slice(0, 5); // åªä¿ç•™å‰ 5 å
            saveLeaderboard(leaderboardData);
            displayLeaderboard();
            leaderboard.style.display = 'block'; // é¡¯ç¤ºæ’è¡Œæ¦œ
            console.log("æ’è¡Œæ¦œå·²æ›´æ–°ä¸¦é¡¯ç¤ºã€‚");
          } else {
            console.log("ç©å®¶æœªè¼¸å…¥å§“åã€‚");
          }

          // é‡ç½®é»æ“Šæ¬¡æ•¸ã€jumpscareTriggered æ¨™èªŒå’Œé‡æ–°ç”Ÿæˆ triggerCount
          clickCount = 0;
          clickCounterDisplay.textContent = "é»æ“Šæ¬¡æ•¸: 0";
          jumpscareTriggered = false;
          initializeGame(); // é‡æ–°åˆå§‹åŒ–éŠæˆ²ä»¥ç”Ÿæˆæ–°çš„ triggerCount
          startHeartAnimation(); // é‡æ–°é–‹å§‹æ„›å¿ƒå‹•ç•«
          console.log("éŠæˆ²å·²é‡ç½®ã€‚");

        }, 5000); // 5000 æ¯«ç§’ = 5 ç§’
      }
    });

    // åˆ†äº«åŠŸèƒ½
    shareButton.addEventListener("click", function() {
      console.log("åˆ†äº«æŒ‰éˆ•è¢«é»æ“Šã€‚");
      const shareText = `æˆ‘åœ¨å¯æ„›å¥³å­©çš„å¹¸é‹æŒ‘æˆ°ä¸­é»äº† ${clickCount} æ¬¡æ‰è¢«åš‡ï¼å¿«ä¾†çœ‹çœ‹ä½ çš„é‹æ°£ï¼šhttps://your-game-url.com`; // è«‹æ›¿æ›ç‚ºä½ çš„å¯¦éš›ç¶²é é€£çµ
      if (navigator.share) {
        navigator.share({
          title: "å¯æ„›å¥³å­©çš„å¹¸é‹æŒ‘æˆ°ï¼", // åˆ†äº«æ¨™é¡Œä¹Ÿæ›´æ”¹
          text: shareText,
          url: "https://your-game-url.com" // è«‹æ›¿æ›ç‚ºä½ çš„å¯¦éš›ç¶²é é€£çµ
        }).then(() => {
          console.log("æˆåŠŸåˆ†äº«");
        }).catch((error) => {
          console.log("åˆ†äº«å¤±æ•—", error);
        });
      } else {
        // å¦‚æœä¸æ”¯æ´ Web Share APIï¼Œé¡¯ç¤ºä¸€å€‹æç¤ºè¨Šæ¯
        alert("ä½ çš„ç€è¦½å™¨ä¸æ”¯æ´åˆ†äº«åŠŸèƒ½ã€‚è«‹æ‰‹å‹•è¤‡è£½ä»¥ä¸‹æ–‡å­—åˆ†äº«ï¼š\n" + shareText);
        console.log("ç€è¦½å™¨ä¸æ”¯æ´ Web Share APIã€‚");
      }
    });
  </script>
</body>
</html>
